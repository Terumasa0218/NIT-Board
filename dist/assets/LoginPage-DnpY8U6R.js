import{r as l,u as S,a as L,b as k,c as M,j as e,L as p,z as c}from"./index-BR_tycMw.js";import{M as P,L as A,E as C,a as I}from"./mail-DAdWvjSC.js";function R(){var x,f;const[o,j]=l.useState(""),[i,N]=l.useState(""),[n,g]=l.useState(!1),[d,u]=l.useState(!1),{login:v,setGuestMode:w}=S(),{t:s}=L(),m=k(),h=((f=(x=M().state)==null?void 0:x.from)==null?void 0:f.pathname)||"/",b=t=>t.endsWith("@ict.nitech.ac.jp"),y=async t=>{if(t.preventDefault(),!b(o)){c.error(s("auth.onlyNitechEmail"));return}u(!0);try{await v(o,i),c.success(s("auth.welcomeBack")),m(h,{replace:!0})}catch(a){console.error("Login error:",a);let r=s("auth.loginFailed");a.code==="auth/user-not-found"||a.code==="auth/wrong-password"?r=s("auth.invalidCredentials"):a.code==="auth/too-many-requests"?r=s("auth.tooManyRequests"):a.message==="EMAIL_NOT_VERIFIED"?r=s("auth.emailNotVerified"):a.message==="USER_SUSPENDED"&&(r="アカウントが一時停止されています"),c.error(r)}finally{u(!1)}},E=()=>{w(!0),m(h,{replace:!0})};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header text-center",children:[e.jsx("h1",{className:"card-title",children:s("auth.welcomeToNitechBoard")}),e.jsx("p",{className:"card-description",children:s("auth.welcomeBack")})]}),e.jsxs("form",{onSubmit:y,className:"card-content space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-foreground",children:s("auth.email")}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{id:"email",type:"email",value:o,onChange:t=>j(t.target.value),placeholder:s("auth.enterEmail"),className:"input pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-foreground",children:s("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{id:"password",type:n?"text":"password",value:i,onChange:t=>N(t.target.value),placeholder:s("auth.enterPassword"),className:"input pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n?e.jsx(C,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(p,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:s("auth.forgotPassword")})}),e.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary w-full",children:s(d?"common.loading":"auth.login")})]}),e.jsxs("div",{className:"card-footer flex flex-col gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"または"})})]}),e.jsx("button",{onClick:E,className:"btn btn-outline w-full",children:s("auth.continueAsGuest")}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[s("auth.dontHaveAccount")," ",e.jsx(p,{to:"/register",className:"text-primary hover:underline",children:s("auth.createAccount")})]})]})]})})})}export{R as default};
