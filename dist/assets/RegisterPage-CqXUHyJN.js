import{d as M,r as a,u as q,a as I,j as e,L as x,z as l}from"./index-BR_tycMw.js";import{M as A,L as f,E as p,a as j}from"./mail-DAdWvjSC.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=M("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function T(){const[n,N]=a.useState(""),[o,g]=a.useState(""),[m,w]=a.useState(""),[i,v]=a.useState(!1),[d,y]=a.useState(!1),[u,h]=a.useState(!1),[b,S]=a.useState(!1),{register:P}=q(),{t:s}=I(),C=t=>t.endsWith("@ict.nitech.ac.jp"),k=t=>t.length>=6,E=(t,r)=>t===r,L=async t=>{if(t.preventDefault(),!C(n)){l.error(s("auth.onlyNitechEmail"));return}if(!k(o)){l.error(s("auth.passwordTooShort"));return}if(!E(o,m)){l.error(s("auth.passwordsMustMatch"));return}h(!0);try{await P(n,o),S(!0),l.success(s("auth.verificationEmailSent"))}catch(r){console.error("Registration error:",r);let c=s("auth.registerFailed");r.code==="auth/email-already-in-use"?c=s("auth.emailAlreadyInUse"):r.code==="auth/weak-password"?c=s("auth.weakPassword"):r.code==="auth/too-many-requests"&&(c=s("auth.tooManyRequests")),l.error(c)}finally{h(!1)}};return b?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"card text-center",children:[e.jsxs("div",{className:"card-header",children:[e.jsx(F,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h1",{className:"card-title",children:s("auth.verificationEmailSent")}),e.jsx("p",{className:"card-description",children:s("auth.checkEmail")})]}),e.jsxs("div",{className:"card-content space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["名古屋工業大学のメールアドレス（",n,"）に確認メールを送信しました。 メール内のリンクをクリックしてアカウントを有効化してください。"]}),e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"注意:"})," 確認メールが届かない場合は、スパムフォルダを確認してください。"]})})]}),e.jsx("div",{className:"card-footer",children:e.jsx(x,{to:"/login",className:"btn btn-primary w-full",children:s("auth.login")})})]})})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header text-center",children:[e.jsx("h1",{className:"card-title",children:s("auth.createAccount")}),e.jsx("p",{className:"card-description",children:"NITech Boardにアカウントを作成"})]}),e.jsxs("form",{onSubmit:L,className:"card-content space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-foreground",children:s("auth.email")}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{id:"email",type:"email",value:n,onChange:t=>N(t.target.value),placeholder:s("auth.enterEmail"),className:"input pl-10",required:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"名古屋工業大学のメールアドレス（@ict.nitech.ac.jp）のみ使用できます"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-foreground",children:s("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{id:"password",type:i?"text":"password",value:o,onChange:t=>g(t.target.value),placeholder:s("auth.enterPassword"),className:"input pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>v(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?e.jsx(p,{className:"h-4 w-4"}):e.jsx(j,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"パスワードは6文字以上である必要があります"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-foreground",children:s("auth.confirmPassword")}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{id:"confirmPassword",type:d?"text":"password",value:m,onChange:t=>w(t.target.value),placeholder:s("auth.enterConfirmPassword"),className:"input pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?e.jsx(p,{className:"h-4 w-4"}):e.jsx(j,{className:"h-4 w-4"})})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"btn btn-primary w-full",children:s(u?"common.loading":"auth.register")})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[s("auth.alreadyHaveAccount")," ",e.jsx(x,{to:"/login",className:"text-primary hover:underline",children:s("auth.login")})]})})]})})})}export{T as default};
